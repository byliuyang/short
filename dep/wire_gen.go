// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package dep

import (
	"database/sql"
	"short/app/adapter/graphql"
	"short/app/adapter/repo"
	"short/app/adapter/request"
	"short/app/adapter/routing"
	"short/app/adapter/service"
	"short/app/usecase/keygen"
	"short/app/usecase/requester"
	"short/app/usecase/url"
	"short/modern/mdgraphql"
	"short/modern/mdhttp"
	"short/modern/mdlogger"
	"short/modern/mdrouting"
	"short/modern/mdservice"
	"short/modern/mdtracer"
)

// Injectors from wire.go:

func InitGraphQlService(name string, db *sql.DB, graphqlPath mdgraphql.Path, secret service.ReCaptchaSecret) mdservice.Service {
	logger := mdlogger.NewLocal()
	tracer := mdtracer.NewLocal()
	repoUrl := repo.NewUrlSql(db)
	retriever := url.NewRetrieverPersist(repoUrl)
	keyGenerator := keygen.NewInMemory()
	creator := url.NewCreatorPersist(repoUrl, keyGenerator)
	client := mdhttp.NewClient()
	http := request.NewHttp(client)
	recaptcha := service.NewReCaptcha(http, secret)
	verifier := requester.NewVerifier(recaptcha)
	graphQlApi := graphql.NewShort(logger, tracer, retriever, creator, verifier)
	server := mdgraphql.NewGraphGophers(graphqlPath, logger, tracer, graphQlApi)
	mdserviceService := mdservice.New(name, server, logger)
	return mdserviceService
}

func InitRoutingService(name string, db *sql.DB, wwwRoot routing.WwwRoot) mdservice.Service {
	logger := mdlogger.NewLocal()
	tracer := mdtracer.NewLocal()
	repoUrl := repo.NewUrlSql(db)
	v := routing.NewShort(logger, tracer, wwwRoot, repoUrl)
	server := mdrouting.NewBuiltIn(logger, tracer, v)
	mdserviceService := mdservice.New(name, server, logger)
	return mdserviceService
}
